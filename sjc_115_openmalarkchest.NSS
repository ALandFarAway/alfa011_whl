////////////////////////////////////////////////////////////////////////////////
//
//  System Name : ACR Configuration File
//     Filename : acf_plc_onopen.nss
//    $Revision:: 183        $ current version of the file
//        $Date:: 2006-12-21#$ date the file was created or modified
//       Author : Ronan
//
//  Local Variable Prefix =
//
//  Dependencies external of nwscript:
//
//  Description
//  This script calls the ACR's OnOpen code for placeables, and any
//  custom code a server may need. It is not updated in ACR updates.
//
//  Revision History
////////////////////////////////////////////////////////////////////////////////

////////////////////////////////////////////////////////////////////////////////
// Includes ////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////

#include "acr_placeable_i"
#include "sjc_tools_i"
#include "acr_db_persist_i"

////////////////////////////////////////////////////////////////////////////////
// Constants ///////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////

////////////////////////////////////////////////////////////////////////////////
// Structures //////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////

////////////////////////////////////////////////////////////////////////////////
// Global Variables ////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////

////////////////////////////////////////////////////////////////////////////////
// Function Prototypes /////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////

// The main event handler.
void main();

////////////////////////////////////////////////////////////////////////////////
// Function Definitions ////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////

void main() {
    ACR_PlaceableOnOpen();

    // Custom code goes here.

object oPC = GetLastOpenedBy();
if (ACR_GetPersistentInt(oPC, "SJC_LYRANSHOLD_STATUS") == 3)
	{
	return;
	}
	
	
if (GetIsDM(oPC))
	{
	return;
	}
	
object oPartyMember = GetFirstFactionMember(oPC, TRUE);
while(GetIsObjectValid(oPartyMember) == TRUE)
    {
	ACR_SetPersistentInt(oPartyMember, "SJC_LYRANSHOLD_STATUS", 3, 0);
    oPartyMember = GetNextFactionMember(oPC, TRUE);
    }
	
SJC_GivePseudoDMXP(oPC, 1, 2);
	
	
	
}